{% from "externalLink.njk" import externalLink %}

{% macro claimRejectedAlreadyPaidForClaimantDashboard(claim) %}
  {{ t('{{ defendantName }} believes that they’ve paid the claim in full.',
    { defendantName: claim.claimData.defendant.name }) }}
{% endmacro %}

{% macro claimRejectedAlreadyPaidForClaimantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('The defendant’s response') }}</h2>
  <p class="govuk-body">
    {{ t('{{ defendantName }} believes that they’ve paid the claim in full. '
      + 'Email {{ emailAddress }} if you want to proceed with the claim '
      + 'you must do this before 4pm on {{ respondToResponseDeadline }}.',
      { defendantName: claim.claimData.defendant.name, emailAddress: supportEmailAddress,
        respondToResponseDeadline: claim.respondToResponseDeadline | date }) }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download their response') }}
  </p>
{% endmacro %}

{% macro claimRejectedAlreadyPaidForDefendantDashboard(claim) %}
  {{ t('We’ve emailed {{ claimantName }} telling them when and how you said you paid the claim.',
    { claimantName: claim.claimData.claimant.name }) }}
{% endmacro %}

{% macro claimRejectedAlreadyPaidForDefendantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('Your response to the claim') }}</h2>
  <p class="govuk-body">
    {{ t('We’ve emailed {{ claimantName }} telling them when and how you said you paid the claim.',
      { claimantName: claim.claimData.claimant.name }) }}
  </p>
  <p class="govuk-body">
    {{ t('We’ll contact you to let you know how they respond. They can confirm you’ve paid and the claim is ' +
      'settled, or they can proceed with it.') }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download your response') }}
  </p>
{% endmacro %}

{% macro claimRejectedFreeMediationNOForClaimantDashboard(claim) %}
  {{ t('{{ defendantName }} has rejected your claim.',
    { defendantName: claim.claimData.defendant.name }) }}
{% endmacro %}

{% macro claimRejectedFreeMediationNOForClaimantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('The defendant’s response') }}</h2>
  <p class="govuk-body">
    {{ t('{{ defendantName }} has rejected your claim. We’ll send you a directions questionnaire – '
      + 'this is a form which you must complete to tell us more about the claim.',
      { defendantName: claim.claimData.defendant.name }) }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download their response') }}
  </p>
{% endmacro %}

{% macro claimRejectedFreeMediationNOForDefendantDashboard() %}
  {{ t('You’ve rejected the claim.') }}
{% endmacro %}

{% macro claimRejectedFreeMediationNOForDefendantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('Your response to the claim') }}</h2>
  <p class="govuk-body">
    {{ t('You have rejected the claim. We’ll send you a directions questionnaire – this is a form which you must '
      + 'complete to tell us more about the claim.') }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download your response') }}
  </p>
{% endmacro %}

{% macro claimRejectedFreeMediationYESForClaimantDashboard(claim) %}
  {{ t('{{ defendantName }} has rejected the claim. But they’ve suggested a mediation session to help resolve this dispute.',
    { defendantName: claim.claimData.defendant.name }) }}
{% endmacro %}

{% macro claimRejectedFreeMediationYESForClaimantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('The defendant’s response') }}</h2>
  <p class="govuk-body">
    {{ t('{{ defendantName }} has rejected the claim. They’ve suggested mediation to help resolve this dispute.',
      { defendantName: claim.claimData.defendant.name }) }}
  </p>

  <p class="govuk-body">{{ externalLink('Find out how mediation works (PDF, 399KB)', 'https://formfinder.hmctsformfinder.justice.gov.uk/ex730-eng.pdf') }}</p>

  <p class="govuk-body">
    {{ t('Tell us whether you agree to mediation or not by emailing {{ emailAddress }} before {{ respondToMediationDeadline }}.',
      { emailAddress: supportEmailAddress, respondToMediationDeadline: claim.respondToMediationDeadline | date }) }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download their response') }}
  </p>
{% endmacro %}

{% macro claimRejectedFreeMediationYESForDefendantDashboard() %}
  {{ t('You’ve rejected the claim and suggested mediation. We’ll ask the claimant if they agree to take part in mediation.') }}
{% endmacro %}

{% macro claimRejectedFreeMediationYESForDefendantClaimDetails(claim) %}
  <h2 class="govuk-heading-s">{{ t('Your response to the claim') }}</h2>
  <p class="govuk-body">
    {{ t('You have rejected the claim. You’ve suggested mediation.') }}
  </p>
  <p class="govuk-body">
    {{ t('We’ll ask {{ claimantName }} if they agree to take part in mediation.',
      { claimantName: claim.claimData.claimant.name }) }}
  </p>
  <p class="govuk-body">
    {{ t('If they say yes, we’ll arrange a date for mediation. If they say no we’ll send you a directions questionnaire - '
      + 'this is a form you complete to tell us more about the claim.') }}
  </p>
  <p class="govuk-body">
    {{ _downloadResponseLink(claim, 'Download your response') }}
  </p>
{% endmacro %}

{% macro _downloadResponseLink(claim, text) %}
  <a class="govuk-link" href="{{ ResponsePaths.receiptReceiver.evaluateUri({ externalId: claim.externalId }) }}">{{ t(text) }}</a>
{% endmacro %}
